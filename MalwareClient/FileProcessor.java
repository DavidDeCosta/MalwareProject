import java.io.File;
import java.io.IOException;

class FileProcessor 
{
    ClientTalker clientTalker;

    FileProcessor(ClientTalker clientTalker) throws IOException
    {
        this.clientTalker = clientTalker;
       
        File root = new File("C:\\school\\machine_org");                           
        searchSubtree(root);                                 // pass root directory to process
    }

    void displayFile(File file) throws IOException
    {
        //System.out.println(f.getAbsolutePath());                       // print file name
        clientTalker.sendMessage(file.getAbsolutePath());    //sends the server the directory path
        
    }

    void searchSubtree(File subTree) throws IOException                             
    {
        File[] fileList = subTree.listFiles();                       // get list of files in directory
        if (fileList != null)                                        // if directory is not empty
        {
            for (File file : fileList)                // for each file in the fileList
            {
                if (file.isDirectory())              
                {
                    searchSubtree(file);           // recursively call searchSubtree until not a directory
                }
                else
                {
                    displayFile(file);       //if file is not a directory, call displayFile which prints the file name                               
                }
            }
        }
        
    }
}
