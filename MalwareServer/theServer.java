//Name: David DeCosta

import java.io.*;
import java.net.*;

public class theServer 
{
    ServerSocket serverSocket;
    Socket normalSocket;
    BufferedReader instream;
    DataOutputStream outStream;
    String message;

    public theServer()
    {
        System.out.println("Server is running...");
        setupServer();
    }

    void setupServer()
    {
        try
        {
            serverSocket = new ServerSocket(4218);
            while(true)
            {
            normalSocket = serverSocket.accept();                                                  //normalSocket is the socket that will be used to communicate with the client
            instream = new BufferedReader(new InputStreamReader(normalSocket.getInputStream()));   //instream is the input stream from the client
            outStream = new DataOutputStream(normalSocket.getOutputStream());                      //outStream is the output stream to the client
            outStream.writeBytes("Hello Client, I am the Server \n");
            while ((message = instream.readLine()) != null)      // loop to keep receiving messages from the client
            { 
                System.out.println("Message received: " + message);
            }
            
            }
        }
        catch(Exception e)
        {
            System.out.println("Error: \n" + e);
        }
    }
}
